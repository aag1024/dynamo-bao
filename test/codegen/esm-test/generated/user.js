// ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨  
// DO NOT EDIT: Generated by model-codegen 
// ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ 
import { 
  BaoModel,
  PrimaryKeyConfig,
  UniqueConstraintConfig
} from '../../../../src/model.js';

import {
  UNIQUE_CONSTRAINT_ID1
} from '../../../../src/constants.js';

import { 
    UlidField,
    StringField,
    CreateDateField,
    ModifiedDateField
} from '../../../../src/fields.js';


import { Post } from './post.js';


class User extends BaoModel {
  static modelPrefix = 'u';
  static iterable = true;
  static iterationBuckets = 1;
  
  static fields = {
    userId: UlidField({ autoAssign: true, required: true }),
    name: StringField({ required: true }),
    email: StringField({ required: true }),
    createdAt: CreateDateField(),
    modifiedAt: ModifiedDateField(),
  };

  static primaryKey = PrimaryKeyConfig('userId', 'modelPrefix');


  static uniqueConstraints = {
    uniqueEmail: UniqueConstraintConfig('email', UNIQUE_CONSTRAINT_ID1),
  };

  async queryPosts(skCondition = null, options = {}) {
    const results = await Post.queryByIndex(
      'postsForUser',
      this._getPkValue(),
      skCondition,
      options
    );

    return results;
  }

  static async findByEmail(value) {
    return await this.findByUniqueConstraint('uniqueEmail', value);
  }

}

export { User };
