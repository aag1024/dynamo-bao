// ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨  
// DO NOT EDIT: Generated by model-codegen 
// ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ ğŸ§¨ 
const { 
  BaoModel,
  PrimaryKeyConfig,
  IndexConfig
} = require('dynamo-bao');

const {
  GSI_INDEX_ID1
} = require('dynamo-bao').constants;


const { 
    RelatedField,
    StringField,
    CreateDateField
} = require('dynamo-bao').fields;






class DocumentPermission extends BaoModel {
  static modelPrefix = 'dp';
  static iterable = false;
  static iterationBuckets = 100;
  
  static fields = {
    documentId: RelatedField('Document', { required: true }),
    userId: RelatedField('User', { required: true }),
    permission: StringField({ required: true }),
    grantedAt: CreateDateField(),
    grantedBy: RelatedField('User', { required: true }),
  };

  static primaryKey = PrimaryKeyConfig('documentId', 'userId');

  static indexes = {
    permissionsForDocument: this.primaryKey,
    permissionsForUser: IndexConfig('userId', 'grantedAt', GSI_INDEX_ID1),
  };




  async getDocument() {
    return await this.getOrLoadRelatedField('documentId');
  }

  async getUser() {
    return await this.getOrLoadRelatedField('userId');
  }

  async getGrantedBy() {
    return await this.getOrLoadRelatedField('grantedBy');
  }
}

module.exports = { DocumentPermission };
